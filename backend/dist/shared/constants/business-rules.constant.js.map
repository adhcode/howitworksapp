{"version":3,"sources":["../../../src/shared/constants/business-rules.constant.ts"],"sourcesContent":["/**\n * HOMEZY BUSINESS RULES\n * \n * This file contains all core business logic constants.\n * Centralizing these values makes the system maintainable and easy to update.\n */\n\nexport const BUSINESS_RULES = {\n  /**\n   * TRANSITION PERIODS FOR EXISTING TENANTS\n   * \n   * When existing tenants (those with active leases elsewhere) join the platform,\n   * they need to start making payments X months before their current lease expires.\n   * \n   * - MONTHLY_PAYOUT: Tenant starts paying 3 months before current lease expiry\n   * - YEARLY_PAYOUT: Tenant starts paying 6 months before current lease expiry\n   * \n   * If the transition period has already passed (e.g., current lease expires in 2 months\n   * but should have started 3 months ago), payment starts immediately.\n   */\n  TRANSITION_PERIODS: {\n    MONTHLY_PAYOUT: 3, // months\n    YEARLY_PAYOUT: 6,  // months\n  },\n\n  /**\n   * PAYMENT DUE DATES\n   * \n   * All payments are due on the 1st of each month.\n   */\n  PAYMENT_DUE_DAY: 1,\n\n  /**\n   * PAYMENT GRACE PERIOD\n   * \n   * Tenants have 3 days after the due date to make payment before it's marked overdue.\n   * Example: Payment due on 1st, grace until 3rd, overdue from 4th.\n   */\n  PAYMENT_GRACE_DAYS: 3,\n\n  /**\n   * PAYMENT REMINDER SCHEDULE\n   * \n   * When to send payment reminders:\n   * - EARLY_REMINDER: 3 days before due date (e.g., on the 28th for payment due on 1st)\n   * - DUE_TODAY: On the due date (1st of month)\n   * - OVERDUE_REMINDERS: On these days after due date [1, 3, 7, 14 days overdue]\n   */\n  PAYMENT_REMINDERS: {\n    EARLY_REMINDER_DAYS: 3,\n    DUE_TODAY_REMINDER: true,\n    OVERDUE_REMINDER_DAYS: [1, 3, 7, 14], // Days after due date\n  },\n\n  /**\n   * ESCROW RULES FOR YEARLY PAYOUT\n   * \n   * When landlord chooses yearly payout:\n   * - Tenant payments accumulate in escrow\n   * - Auto-release after 12 months of accumulation\n   * - OR when contract expires (whichever comes first)\n   */\n  ESCROW: {\n    AUTO_RELEASE_MONTHS: 12,\n    RELEASE_ON_CONTRACT_EXPIRY: true,\n    GRACE_DAYS_AFTER_EXPIRY: 7, // Wait 7 days after expiry before releasing\n  },\n\n  /**\n   * NOTIFICATION CHANNELS\n   * \n   * Priority order for sending notifications:\n   * 1. Push notifications (mobile app)\n   * 2. Email (all notifications)\n   * 3. SMS (overdue payments only)\n   */\n  NOTIFICATION_CHANNELS: {\n    PUSH: {\n      enabled: true,\n      priority: 1,\n      allNotifications: true,\n    },\n    EMAIL: {\n      enabled: true,\n      priority: 2,\n      allNotifications: true,\n    },\n    SMS: {\n      enabled: true,\n      priority: 3,\n      overdueOnly: true, // Only send SMS for overdue payments\n    },\n  },\n\n  /**\n   * CONTRACT STATUS TRANSITIONS\n   * \n   * Valid status transitions:\n   * pending → active (when tenant accepts and makes first payment)\n   * active → expired (when lease end date is reached)\n   * active → terminated (early termination)\n   * expired → terminated (cleanup)\n   */\n  CONTRACT_STATUS: {\n    PENDING: 'pending',\n    ACTIVE: 'active',\n    EXPIRED: 'expired',\n    TERMINATED: 'terminated',\n  },\n\n  /**\n   * LANDLORD PAYOUT TYPES\n   */\n  PAYOUT_TYPES: {\n    MONTHLY: 'monthly', // Immediate payout to landlord\n    YEARLY: 'yearly',   // Accumulate in escrow\n  },\n} as const;\n\n/**\n * Type exports for type safety\n */\nexport type PayoutType = typeof BUSINESS_RULES.PAYOUT_TYPES[keyof typeof BUSINESS_RULES.PAYOUT_TYPES];\nexport type ContractStatus = typeof BUSINESS_RULES.CONTRACT_STATUS[keyof typeof BUSINESS_RULES.CONTRACT_STATUS];\n\n\n\n"],"names":["BUSINESS_RULES","TRANSITION_PERIODS","MONTHLY_PAYOUT","YEARLY_PAYOUT","PAYMENT_DUE_DAY","PAYMENT_GRACE_DAYS","PAYMENT_REMINDERS","EARLY_REMINDER_DAYS","DUE_TODAY_REMINDER","OVERDUE_REMINDER_DAYS","ESCROW","AUTO_RELEASE_MONTHS","RELEASE_ON_CONTRACT_EXPIRY","GRACE_DAYS_AFTER_EXPIRY","NOTIFICATION_CHANNELS","PUSH","enabled","priority","allNotifications","EMAIL","SMS","overdueOnly","CONTRACT_STATUS","PENDING","ACTIVE","EXPIRED","TERMINATED","PAYOUT_TYPES","MONTHLY","YEARLY"],"mappings":"AAAA;;;;;CAKC;;;;+BAEYA;;;eAAAA;;;AAAN,MAAMA,iBAAiB;IAC5B;;;;;;;;;;;GAWC,GACDC,oBAAoB;QAClBC,gBAAgB;QAChBC,eAAe;IACjB;IAEA;;;;GAIC,GACDC,iBAAiB;IAEjB;;;;;GAKC,GACDC,oBAAoB;IAEpB;;;;;;;GAOC,GACDC,mBAAmB;QACjBC,qBAAqB;QACrBC,oBAAoB;QACpBC,uBAAuB;YAAC;YAAG;YAAG;YAAG;SAAG;IACtC;IAEA;;;;;;;GAOC,GACDC,QAAQ;QACNC,qBAAqB;QACrBC,4BAA4B;QAC5BC,yBAAyB;IAC3B;IAEA;;;;;;;GAOC,GACDC,uBAAuB;QACrBC,MAAM;YACJC,SAAS;YACTC,UAAU;YACVC,kBAAkB;QACpB;QACAC,OAAO;YACLH,SAAS;YACTC,UAAU;YACVC,kBAAkB;QACpB;QACAE,KAAK;YACHJ,SAAS;YACTC,UAAU;YACVI,aAAa;QACf;IACF;IAEA;;;;;;;;GAQC,GACDC,iBAAiB;QACfC,SAAS;QACTC,QAAQ;QACRC,SAAS;QACTC,YAAY;IACd;IAEA;;GAEC,GACDC,cAAc;QACZC,SAAS;QACTC,QAAQ;IACV;AACF"}