{"version":3,"sources":["../../src/admin/admin.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Patch,\n  Delete,\n  Body,\n  Param,\n  Query,\n  UseGuards,\n  Req,\n  HttpStatus,\n  HttpException,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { RolesGuard } from '../auth/guards/roles.guard';\nimport { Roles } from '../auth/decorators/roles.decorator';\nimport { UserRole } from '../auth/dto/auth.dto';\nimport { AdminService } from './admin.service';\nimport { FacilitatorsService } from '../facilitators/facilitators.service';\nimport { CreateUserDto, UpdateUserDto, AdminAssignFacilitatorDto } from './dto/admin.dto';\nimport { CreateFacilitatorDto } from '../facilitators/dto/facilitator.dto';\n\n@ApiTags('Admin')\n@Controller('admin')\n@UseGuards(JwtAuthGuard, RolesGuard)\n@Roles(UserRole.ADMIN)\n@ApiBearerAuth('JWT-auth')\nexport class AdminController {\n  constructor(\n    private readonly adminService: AdminService,\n    private readonly facilitatorsService: FacilitatorsService\n  ) {}\n\n  @Get('dashboard/stats')\n  async getDashboardStats() {\n    try {\n      return await this.adminService.getDashboardStats();\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch dashboard stats',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('analytics/revenue')\n  async getRevenueAnalytics(@Query('timeframe') timeframe = '6m') {\n    try {\n      return await this.adminService.getRevenueAnalytics(timeframe);\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch revenue analytics',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('analytics/maintenance')\n  async getMaintenanceAnalytics(@Query('timeframe') timeframe = '6m') {\n    try {\n      return await this.adminService.getMaintenanceAnalytics(timeframe);\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch maintenance analytics',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('users')\n  @ApiOperation({ summary: 'Get all users with pagination and filtering' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Users retrieved successfully' })\n  async getUsers(\n    @Query('page') page: string = '1',\n    @Query('limit') limit: string = '10',\n    @Query('role') role?: string,\n    @Query('search') search?: string,\n  ) {\n    return this.adminService.getUsers({\n      page: parseInt(page, 10),\n      limit: parseInt(limit, 10),\n      role,\n      search,\n    });\n  }\n\n  @Post('users')\n  @ApiOperation({ summary: 'Create a new user (facilitator)' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'User created successfully' })\n  async createUser(@Body() createUserDto: CreateUserDto) {\n    return this.adminService.createUser(createUserDto);\n  }\n\n  @Get('users/:id')\n  @ApiOperation({ summary: 'Get user by ID' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'User retrieved successfully' })\n  async getUserById(@Param('id') id: string) {\n    return this.adminService.getUserById(id);\n  }\n\n  @Patch('users/:id')\n  @ApiOperation({ summary: 'Update user' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'User updated successfully' })\n  async updateUser(@Param('id') id: string, @Body() updateUserDto: UpdateUserDto) {\n    return this.adminService.updateUser(id, updateUserDto);\n  }\n\n  @Delete('users/:id')\n  @ApiOperation({ summary: 'Delete user' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'User deleted successfully' })\n  async deleteUser(@Param('id') id: string) {\n    return this.adminService.deleteUser(id);\n  }\n\n  @Patch('users/:id/toggle-status')\n  @ApiOperation({ summary: 'Toggle user active status' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'User status updated successfully' })\n  async toggleUserStatus(@Param('id') id: string) {\n    return this.adminService.toggleUserStatus(id);\n  }\n\n  @Get('properties')\n  @ApiOperation({ summary: 'Get all properties with pagination' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Properties retrieved successfully' })\n  async getProperties(\n    @Query('page') page: string = '1',\n    @Query('limit') limit: string = '10',\n    @Query('search') search?: string,\n  ) {\n    return this.adminService.getProperties({\n      page: parseInt(page, 10),\n      limit: parseInt(limit, 10),\n      search,\n    });\n  }\n\n  @Patch('properties/:id/assign-facilitator')\n  @ApiOperation({ summary: 'Assign facilitator to property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator assigned successfully' })\n  async assignFacilitatorToProperty(\n    @Param('id') propertyId: string,\n    @Body() assignFacilitatorDto: AdminAssignFacilitatorDto,\n  ) {\n    return this.adminService.assignFacilitatorToProperty(propertyId, assignFacilitatorDto.facilitatorId);\n  }\n\n  @Patch('properties/:id/remove-facilitator')\n  @ApiOperation({ summary: 'Remove facilitator from property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator removed successfully' })\n  async removeFacilitatorFromProperty(@Param('id') propertyId: string) {\n    return this.adminService.removeFacilitatorFromProperty(propertyId);\n  }\n\n  @Get('analytics/properties')\n  @ApiOperation({ summary: 'Get property analytics' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Property analytics retrieved successfully' })\n  async getPropertyAnalytics(@Query('timeframe') timeframe: string = '30d') {\n    return this.adminService.getPropertyAnalytics(timeframe);\n  }\n\n  // Facilitator Management Endpoints\n  @Get('facilitators')\n  @ApiOperation({ summary: 'Get all facilitators' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitators retrieved successfully' })\n  async getAllFacilitators() {\n    try {\n      const facilitators = await this.facilitatorsService.getAllFacilitators();\n      return {\n        success: true,\n        data: facilitators,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch facilitators',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Post('facilitators')\n  @ApiOperation({ summary: 'Create a new facilitator' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'Facilitator created successfully' })\n  async createFacilitator(@Body() createFacilitatorDto: CreateFacilitatorDto) {\n    try {\n      const facilitator = await this.facilitatorsService.createFacilitator(createFacilitatorDto);\n      return {\n        success: true,\n        message: 'Facilitator created successfully',\n        data: facilitator,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to create facilitator',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  @Get('facilitators/:id')\n  @ApiOperation({ summary: 'Get facilitator by ID' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator retrieved successfully' })\n  async getFacilitatorById(@Param('id') id: string) {\n    try {\n      const facilitator = await this.facilitatorsService.getFacilitatorById(id);\n      return {\n        success: true,\n        data: facilitator,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Facilitator not found',\n        HttpStatus.NOT_FOUND,\n      );\n    }\n  }\n\n  @Get('facilitators/:id/properties')\n  @ApiOperation({ summary: 'Get properties assigned to facilitator' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Properties retrieved successfully' })\n  async getFacilitatorProperties(@Param('id') id: string) {\n    try {\n      const properties = await this.facilitatorsService.getFacilitatorProperties(id);\n      return {\n        success: true,\n        data: properties,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch facilitator properties',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('facilitators/:id/stats')\n  @ApiOperation({ summary: 'Get facilitator dashboard statistics' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Statistics retrieved successfully' })\n  async getFacilitatorStats(@Param('id') id: string) {\n    try {\n      const stats = await this.facilitatorsService.getFacilitatorStats(id);\n      return {\n        success: true,\n        data: stats,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch facilitator stats',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Patch('facilitators/:id/status')\n  @ApiOperation({ summary: 'Update facilitator status' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator status updated successfully' })\n  async updateFacilitatorStatus(\n    @Param('id') id: string,\n    @Body() updateDto: { isActive: boolean },\n    @Req() req: any\n  ) {\n    try {\n      const facilitator = await this.facilitatorsService.updateFacilitatorStatus(\n        id,\n        updateDto.isActive,\n        req.user.id\n      );\n      return {\n        success: true,\n        message: `Facilitator ${updateDto.isActive ? 'activated' : 'deactivated'} successfully`,\n        data: facilitator,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to update facilitator status',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  @Post('facilitators/:id/reset-password')\n  @ApiOperation({ summary: 'Reset facilitator password' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Password reset successfully' })\n  async resetFacilitatorPassword(@Param('id') id: string) {\n    try {\n      const result = await this.facilitatorsService.resetPassword(id);\n      return {\n        success: true,\n        message: 'Password reset successfully',\n        data: result,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to reset password',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  @Patch('facilitators/:id')\n  @ApiOperation({ summary: 'Update facilitator details' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator updated successfully' })\n  async updateFacilitator(\n    @Param('id') id: string,\n    @Body() updateDto: {\n      firstName?: string;\n      lastName?: string;\n      email?: string;\n      phoneNumber?: string;\n      nextOfKinName?: string;\n      nextOfKinPhone?: string;\n      nextOfKinRelationship?: string;\n    }\n  ) {\n    try {\n      const facilitator = await this.facilitatorsService.updateFacilitator(id, updateDto);\n      return {\n        success: true,\n        message: 'Facilitator updated successfully',\n        data: facilitator,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to update facilitator',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  @Post('facilitators/assign-property')\n  @ApiOperation({ summary: 'Assign facilitator to property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator assigned successfully' })\n  async assignFacilitatorToPropertyNew(\n    @Body() assignDto: { facilitatorId: string; propertyId: string },\n    @Req() req: any\n  ) {\n    try {\n      const result = await this.facilitatorsService.assignFacilitatorToProperty(\n        assignDto,\n        req.user.id\n      );\n      return result;\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to assign facilitator',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  @Delete('properties/:propertyId/facilitator')\n  @ApiOperation({ summary: 'Remove facilitator from property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Facilitator removed successfully' })\n  async removeFacilitatorFromPropertyNew(\n    @Param('propertyId') propertyId: string,\n    @Req() req: any\n  ) {\n    try {\n      const result = await this.facilitatorsService.removeFacilitatorFromProperty(\n        propertyId,\n        req.user.id\n      );\n      return result;\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to remove facilitator',\n        HttpStatus.BAD_REQUEST,\n      );\n    }\n  }\n\n  // Property Detail Endpoints\n  @Get('properties/:id')\n  @ApiOperation({ summary: 'Get property by ID with details' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Property retrieved successfully' })\n  async getPropertyById(@Param('id') id: string) {\n    try {\n      const property = await this.adminService.getPropertyById(id);\n      return {\n        success: true,\n        data: property,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Property not found',\n        HttpStatus.NOT_FOUND,\n      );\n    }\n  }\n\n  @Get('properties/:id/units')\n  @ApiOperation({ summary: 'Get units for a property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Units retrieved successfully' })\n  async getPropertyUnits(@Param('id') id: string) {\n    try {\n      const units = await this.adminService.getPropertyUnits(id);\n      return {\n        success: true,\n        data: units,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch property units',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('properties/:id/tenants')\n  @ApiOperation({ summary: 'Get tenants for a property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Tenants retrieved successfully' })\n  async getPropertyTenants(@Param('id') id: string) {\n    try {\n      const tenants = await this.adminService.getPropertyTenants(id);\n      return {\n        success: true,\n        data: tenants,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch property tenants',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('properties/:id/maintenance')\n  @ApiOperation({ summary: 'Get maintenance requests for a property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Maintenance requests retrieved successfully' })\n  async getPropertyMaintenance(@Param('id') id: string) {\n    try {\n      const maintenance = await this.adminService.getPropertyMaintenance(id);\n      return {\n        success: true,\n        data: maintenance,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch property maintenance',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('properties/:id/payments')\n  @ApiOperation({ summary: 'Get payments for a property' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Payments retrieved successfully' })\n  async getPropertyPayments(@Param('id') id: string) {\n    try {\n      const payments = await this.adminService.getPropertyPayments(id);\n      return {\n        success: true,\n        data: payments,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch property payments',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('maintenance')\n  @ApiOperation({ summary: 'Get all maintenance requests across all properties' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Maintenance requests retrieved successfully' })\n  async getAllMaintenanceRequests(\n    @Query('status') status?: string,\n    @Query('priority') priority?: string,\n    @Query('page') page: string = '1',\n    @Query('limit') limit: string = '50'\n  ) {\n    try {\n      const maintenance = await this.adminService.getAllMaintenanceRequests({\n        status,\n        priority,\n        page: parseInt(page, 10),\n        limit: parseInt(limit, 10),\n      });\n      return {\n        success: true,\n        data: maintenance,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch maintenance requests',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('messages/conversations')\n  @ApiOperation({ summary: 'Get all conversations for admin' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Conversations retrieved successfully' })\n  async getAdminConversations(@Req() req: any) {\n    try {\n      const conversations = await this.adminService.getAdminConversations(req.user.id);\n      return {\n        success: true,\n        data: conversations,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch conversations',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('messages/conversation/:otherUserId')\n  @ApiOperation({ summary: 'Get messages in a conversation' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Messages retrieved successfully' })\n  async getAdminConversation(\n    @Req() req: any,\n    @Param('otherUserId') otherUserId: string,\n    @Query('page') page: string = '1',\n    @Query('limit') limit: string = '20'\n  ) {\n    try {\n      const messages = await this.adminService.getAdminConversation(\n        req.user.id,\n        otherUserId,\n        {\n          page: parseInt(page, 10),\n          limit: parseInt(limit, 10),\n        }\n      );\n      return {\n        success: true,\n        data: messages,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch conversation',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Post('messages')\n  @ApiOperation({ summary: 'Send a message as admin' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'Message sent successfully' })\n  async sendAdminMessage(\n    @Req() req: any,\n    @Body() messageDto: {\n      receiverId: string;\n      subject?: string;\n      content: string;\n    }\n  ) {\n    try {\n      const message = await this.adminService.sendAdminMessage(req.user.id, messageDto);\n      return {\n        success: true,\n        data: message,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to send message',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('messages/unread-count')\n  @ApiOperation({ summary: 'Get unread message count for admin' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Unread count retrieved successfully' })\n  async getAdminUnreadCount(@Req() req: any) {\n    try {\n      const count = await this.adminService.getAdminUnreadCount(req.user.id);\n      return {\n        success: true,\n        data: count,\n      };\n    } catch (error) {\n      throw new HttpException(\n        error.message || 'Failed to fetch unread count',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n}\n\n\n"],"names":["AdminController","getDashboardStats","adminService","error","HttpException","message","HttpStatus","INTERNAL_SERVER_ERROR","getRevenueAnalytics","timeframe","getMaintenanceAnalytics","getUsers","page","limit","role","search","parseInt","createUser","createUserDto","getUserById","id","updateUser","updateUserDto","deleteUser","toggleUserStatus","getProperties","assignFacilitatorToProperty","propertyId","assignFacilitatorDto","facilitatorId","removeFacilitatorFromProperty","getPropertyAnalytics","getAllFacilitators","facilitators","facilitatorsService","success","data","createFacilitator","createFacilitatorDto","facilitator","BAD_REQUEST","getFacilitatorById","NOT_FOUND","getFacilitatorProperties","properties","getFacilitatorStats","stats","updateFacilitatorStatus","updateDto","req","isActive","user","resetFacilitatorPassword","result","resetPassword","updateFacilitator","assignFacilitatorToPropertyNew","assignDto","removeFacilitatorFromPropertyNew","getPropertyById","property","getPropertyUnits","units","getPropertyTenants","tenants","getPropertyMaintenance","maintenance","getPropertyPayments","payments","getAllMaintenanceRequests","status","priority","getAdminConversations","conversations","getAdminConversation","otherUserId","messages","sendAdminMessage","messageDto","getAdminUnreadCount","count","summary","OK","description","CREATED","ADMIN"],"mappings":"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"}