{"version":3,"sources":["../../../../src/core/contracts/dto/create-contract.dto.ts"],"sourcesContent":["import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { IsUUID, IsNumber, IsEnum, IsDateString, IsBoolean, IsOptional, Min } from 'class-validator';\n\nexport enum LandlordPayoutType {\n  MONTHLY = 'monthly',\n  YEARLY = 'yearly',\n}\n\n/**\n * DTO for creating a contract for a NEW tenant\n * \n * New tenant = Starting fresh lease, no existing lease elsewhere\n * Payment starts on lease start date\n */\nexport class CreateNewTenantContractDto {\n  @ApiProperty({ description: 'Tenant user ID' })\n  @IsUUID()\n  tenantId: string;\n\n  @ApiProperty({ description: 'Landlord user ID' })\n  @IsUUID()\n  landlordId: string;\n\n  @ApiProperty({ description: 'Property ID' })\n  @IsUUID()\n  propertyId: string;\n\n  @ApiProperty({ description: 'Unit ID' })\n  @IsUUID()\n  unitId: string;\n\n  @ApiProperty({ description: 'Monthly rent amount', example: 1500.00 })\n  @IsNumber()\n  @Min(0)\n  monthlyAmount: number;\n\n  @ApiProperty({ description: 'Lease start date (when tenant moves in)' })\n  @IsDateString()\n  leaseStartDate: string;\n\n  @ApiProperty({ description: 'Lease end date (when lease expires)' })\n  @IsDateString()\n  leaseEndDate: string;\n\n  @ApiProperty({ \n    description: 'How landlord wants to receive payment',\n    enum: LandlordPayoutType,\n    example: LandlordPayoutType.MONTHLY\n  })\n  @IsEnum(LandlordPayoutType)\n  landlordPayoutType: LandlordPayoutType;\n}\n\n/**\n * DTO for creating a contract for an EXISTING tenant\n * \n * Existing tenant = Already has active lease elsewhere, transitioning to Homezy\n * \n * Landlord provides:\n * - Current lease expiry date (when their existing lease ends)\n * - New monthly rent amount (what they'll pay through Homezy)\n * \n * System calculates:\n * - Transition start date (when they start paying):\n *   * If monthly payout: 3 months before expiry\n *   * If yearly payout: 6 months before expiry\n *   * If that date has passed, starts immediately\n * - First payment due date\n */\nexport class CreateExistingTenantContractDto {\n  @ApiProperty({ description: 'Tenant user ID' })\n  @IsUUID()\n  tenantId: string;\n\n  @ApiProperty({ description: 'Landlord user ID' })\n  @IsUUID()\n  landlordId: string;\n\n  @ApiProperty({ description: 'Property ID' })\n  @IsUUID()\n  propertyId: string;\n\n  @ApiProperty({ description: 'Unit ID' })\n  @IsUUID()\n  unitId: string;\n\n  @ApiProperty({ description: 'Monthly rent amount (NEW amount for Homezy)', example: 1500.00 })\n  @IsNumber()\n  @Min(0)\n  monthlyAmount: number;\n\n  @ApiProperty({ \n    description: 'When the tenant\\'s CURRENT lease expires (not on Homezy)',\n    example: '2025-12-31'\n  })\n  @IsDateString()\n  currentLeaseExpiryDate: string;\n\n  @ApiProperty({ \n    description: 'How landlord wants to receive payment',\n    enum: LandlordPayoutType,\n    example: LandlordPayoutType.MONTHLY\n  })\n  @IsEnum(LandlordPayoutType)\n  landlordPayoutType: LandlordPayoutType;\n\n  @ApiPropertyOptional({ \n    description: 'Optional: When the new Homezy lease should end. If not provided, defaults to 1 year after current lease expiry.',\n  })\n  @IsOptional()\n  @IsDateString()\n  newLeaseEndDate?: string;\n}\n\n/**\n * DTO for updating a contract\n */\nexport class UpdateContractDto {\n  @ApiPropertyOptional({ description: 'Update monthly rent amount' })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  monthlyAmount?: number;\n\n  @ApiPropertyOptional({ description: 'Update lease end date' })\n  @IsOptional()\n  @IsDateString()\n  leaseEndDate?: string;\n\n  @ApiPropertyOptional({ description: 'Update payout type' })\n  @IsOptional()\n  @IsEnum(LandlordPayoutType)\n  landlordPayoutType?: LandlordPayoutType;\n}\n\n/**\n * DTO for querying contracts\n */\nexport class ContractQueryDto {\n  @ApiPropertyOptional({ description: 'Filter by tenant ID' })\n  @IsOptional()\n  @IsUUID()\n  tenantId?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by landlord ID' })\n  @IsOptional()\n  @IsUUID()\n  landlordId?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by property ID' })\n  @IsOptional()\n  @IsUUID()\n  propertyId?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by status', enum: ['active', 'expired', 'terminated', 'pending'] })\n  @IsOptional()\n  status?: string;\n}\n\n/**\n * Response DTO for contract details\n */\nexport class ContractResponseDto {\n  @ApiProperty()\n  id: string;\n\n  @ApiProperty()\n  tenantId: string;\n\n  @ApiProperty()\n  landlordId: string;\n\n  @ApiProperty()\n  propertyId: string;\n\n  @ApiProperty()\n  unitId: string;\n\n  @ApiProperty()\n  monthlyAmount: string;\n\n  @ApiProperty()\n  leaseStartDate: Date;\n\n  @ApiProperty()\n  leaseEndDate: Date;\n\n  @ApiProperty({ enum: LandlordPayoutType })\n  landlordPayoutType: LandlordPayoutType;\n\n  @ApiProperty()\n  nextPaymentDue: Date;\n\n  @ApiProperty()\n  status: string;\n\n  @ApiProperty()\n  isExistingTenant: boolean;\n\n  @ApiPropertyOptional({ description: 'For existing tenants only' })\n  currentLeaseExpiry?: Date;\n\n  @ApiPropertyOptional({ description: 'For existing tenants only' })\n  transitionStartDate?: Date;\n\n  @ApiProperty()\n  createdAt: Date;\n\n  @ApiProperty()\n  updatedAt: Date;\n}\n\n\n\n"],"names":["ContractQueryDto","ContractResponseDto","CreateExistingTenantContractDto","CreateNewTenantContractDto","LandlordPayoutType","UpdateContractDto","description","example","enum"],"mappings":";;;;;;;;;;;QA0IaA;eAAAA;;QAwBAC;eAAAA;;QA7FAC;eAAAA;;QAvDAC;eAAAA;;QAXDC;eAAAA;;QAkHCC;eAAAA;;;yBArHoC;gCACkC;;;;;;;;;;AAE5E,IAAA,AAAKD,4CAAAA;;;WAAAA;;AAWL,IAAA,AAAMD,6BAAN,MAAMA;AAqCb;;;QApCiBG,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;QAAuBC,SAAS;;;;;;;;QAK7CD,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAK1BA,aAAa;QACbE,MAAMJ;QACNG,OAAO;;;;;AAsBJ,IAAA,AAAML,kCAAN,MAAMA;AA2Cb;;;QA1CiBI,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;;;;;;;QAIbA,aAAa;QAA+CC,SAAS;;;;;;;;QAMlFD,aAAa;QACbC,SAAS;;;;;;;QAMTD,aAAa;QACbE,MAAMJ;QACNG,OAAO;;;;;;;QAMPD,aAAa;;;;;;AAUV,IAAA,AAAMD,oBAAN,MAAMA;AAgBb;;;QAfyBC,aAAa;;;;;;;;;QAMbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;AAS/B,IAAA,AAAMN,mBAAN,MAAMA;AAmBb;;;QAlByBM,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;QAAoBE,MAAM;YAAC;YAAU;YAAW;YAAc;SAAU;;;;;AAQvG,IAAA,AAAMP,sBAAN,MAAMA;AAgDb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAvBiBO,MAAMJ;;;;;;;;;;;;;;;;;;QAYEE,aAAa;;;;;;QAGbA,aAAa"}