{"version":3,"sources":["../../../src/database/schema/messages.ts"],"sourcesContent":["import { pgTable, uuid, varchar, text, timestamp, boolean, pgEnum } from 'drizzle-orm/pg-core';\nimport { users } from './users';\nimport { properties } from './properties';\n\nexport const messageStatusEnum = pgEnum('message_status', ['sent', 'delivered', 'read']);\nexport const requestStatusEnum = pgEnum('request_status', ['pending', 'in_progress', 'completed', 'cancelled']);\nexport const requestPriorityEnum = pgEnum('request_priority', ['low', 'medium', 'high', 'urgent']);\n\nexport const messages = pgTable('messages', {\n  id: uuid('id').defaultRandom().primaryKey(),\n  senderId: uuid('sender_id').references(() => users.id).notNull(),\n  receiverId: uuid('receiver_id').references(() => users.id).notNull(),\n  subject: varchar('subject', { length: 255 }),\n  content: text('content').notNull(),\n  status: messageStatusEnum('status').default('sent'),\n  isRead: boolean('is_read').default(false),\n  readAt: timestamp('read_at'),\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport const maintenanceRequests = pgTable('maintenance_requests', {\n  id: uuid('id').defaultRandom().primaryKey(),\n  tenantId: uuid('tenant_id').references(() => users.id).notNull(),\n  landlordId: uuid('landlord_id').references(() => users.id).notNull(),\n  propertyId: uuid('property_id').references(() => properties.id).notNull(),\n  unitId: uuid('unit_id'),\n  title: varchar('title', { length: 255 }).notNull(),\n  description: text('description').notNull(),\n  priority: requestPriorityEnum('priority').default('medium'),\n  status: requestStatusEnum('status').default('pending'),\n  images: text('images').array(),\n  comments: text('comments').default('[]'),\n  assignedTo: uuid('assigned_to').references(() => users.id),\n  completedAt: timestamp('completed_at'),\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport type Message = typeof messages.$inferSelect;\nexport type NewMessage = typeof messages.$inferInsert;\nexport type MaintenanceRequest = typeof maintenanceRequests.$inferSelect;\nexport type NewMaintenanceRequest = typeof maintenanceRequests.$inferInsert;"],"names":["maintenanceRequests","messageStatusEnum","messages","requestPriorityEnum","requestStatusEnum","pgEnum","pgTable","id","uuid","defaultRandom","primaryKey","senderId","references","users","notNull","receiverId","subject","varchar","length","content","text","status","default","isRead","boolean","readAt","timestamp","createdAt","defaultNow","updatedAt","tenantId","landlordId","propertyId","properties","unitId","title","description","priority","images","array","comments","assignedTo","completedAt"],"mappings":";;;;;;;;;;;QAqBaA;eAAAA;;QAjBAC;eAAAA;;QAIAC;eAAAA;;QAFAC;eAAAA;;QADAC;eAAAA;;;wBAL4D;uBACnD;4BACK;AAEpB,MAAMH,oBAAoBI,IAAAA,cAAM,EAAC,kBAAkB;IAAC;IAAQ;IAAa;CAAO;AAChF,MAAMD,oBAAoBC,IAAAA,cAAM,EAAC,kBAAkB;IAAC;IAAW;IAAe;IAAa;CAAY;AACvG,MAAMF,sBAAsBE,IAAAA,cAAM,EAAC,oBAAoB;IAAC;IAAO;IAAU;IAAQ;CAAS;AAE1F,MAAMH,WAAWI,IAAAA,eAAO,EAAC,YAAY;IAC1CC,IAAIC,IAAAA,YAAI,EAAC,MAAMC,aAAa,GAAGC,UAAU;IACzCC,UAAUH,IAAAA,YAAI,EAAC,aAAaI,UAAU,CAAC,IAAMC,YAAK,CAACN,EAAE,EAAEO,OAAO;IAC9DC,YAAYP,IAAAA,YAAI,EAAC,eAAeI,UAAU,CAAC,IAAMC,YAAK,CAACN,EAAE,EAAEO,OAAO;IAClEE,SAASC,IAAAA,eAAO,EAAC,WAAW;QAAEC,QAAQ;IAAI;IAC1CC,SAASC,IAAAA,YAAI,EAAC,WAAWN,OAAO;IAChCO,QAAQpB,kBAAkB,UAAUqB,OAAO,CAAC;IAC5CC,QAAQC,IAAAA,eAAO,EAAC,WAAWF,OAAO,CAAC;IACnCG,QAAQC,IAAAA,iBAAS,EAAC;IAClBC,WAAWD,IAAAA,iBAAS,EAAC,cAAcE,UAAU;IAC7CC,WAAWH,IAAAA,iBAAS,EAAC,cAAcE,UAAU;AAC/C;AAEO,MAAM5B,sBAAsBM,IAAAA,eAAO,EAAC,wBAAwB;IACjEC,IAAIC,IAAAA,YAAI,EAAC,MAAMC,aAAa,GAAGC,UAAU;IACzCoB,UAAUtB,IAAAA,YAAI,EAAC,aAAaI,UAAU,CAAC,IAAMC,YAAK,CAACN,EAAE,EAAEO,OAAO;IAC9DiB,YAAYvB,IAAAA,YAAI,EAAC,eAAeI,UAAU,CAAC,IAAMC,YAAK,CAACN,EAAE,EAAEO,OAAO;IAClEkB,YAAYxB,IAAAA,YAAI,EAAC,eAAeI,UAAU,CAAC,IAAMqB,sBAAU,CAAC1B,EAAE,EAAEO,OAAO;IACvEoB,QAAQ1B,IAAAA,YAAI,EAAC;IACb2B,OAAOlB,IAAAA,eAAO,EAAC,SAAS;QAAEC,QAAQ;IAAI,GAAGJ,OAAO;IAChDsB,aAAahB,IAAAA,YAAI,EAAC,eAAeN,OAAO;IACxCuB,UAAUlC,oBAAoB,YAAYmB,OAAO,CAAC;IAClDD,QAAQjB,kBAAkB,UAAUkB,OAAO,CAAC;IAC5CgB,QAAQlB,IAAAA,YAAI,EAAC,UAAUmB,KAAK;IAC5BC,UAAUpB,IAAAA,YAAI,EAAC,YAAYE,OAAO,CAAC;IACnCmB,YAAYjC,IAAAA,YAAI,EAAC,eAAeI,UAAU,CAAC,IAAMC,YAAK,CAACN,EAAE;IACzDmC,aAAahB,IAAAA,iBAAS,EAAC;IACvBC,WAAWD,IAAAA,iBAAS,EAAC,cAAcE,UAAU;IAC7CC,WAAWH,IAAAA,iBAAS,EAAC,cAAcE,UAAU;AAC/C"}