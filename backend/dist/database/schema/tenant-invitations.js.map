{"version":3,"sources":["../../../src/database/schema/tenant-invitations.ts"],"sourcesContent":["import { pgTable, uuid, varchar, text, timestamp, decimal, boolean, pgEnum } from 'drizzle-orm/pg-core';\nimport { users } from './users';\nimport { properties, units } from './properties';\n\nexport const invitationStatusEnum = pgEnum('invitation_status', ['pending', 'accepted', 'expired', 'cancelled']);\n\nexport const tenantInvitations = pgTable('tenant_invitations', {\n  id: uuid('id').defaultRandom().primaryKey(),\n  invitationToken: varchar('invitation_token', { length: 255 }).unique().notNull(),\n  landlordId: uuid('landlord_id').references(() => users.id).notNull(),\n  propertyId: uuid('property_id').references(() => properties.id).notNull(),\n  unitId: uuid('unit_id').references(() => units.id).notNull(),\n  \n  // Pre-filled tenant information\n  firstName: varchar('first_name', { length: 100 }).notNull(),\n  lastName: varchar('last_name', { length: 100 }).notNull(),\n  email: varchar('email', { length: 255 }).notNull(),\n  phone: varchar('phone', { length: 20 }).notNull(),\n  emergencyContact: varchar('emergency_contact', { length: 100 }),\n  emergencyPhone: varchar('emergency_phone', { length: 20 }),\n  \n  // Lease information\n  leaseStartDate: timestamp('lease_start_date').notNull(),\n  leaseEndDate: timestamp('lease_end_date').notNull(),\n  monthlyRent: decimal('monthly_rent', { precision: 10, scale: 2 }).notNull(),\n  securityDeposit: decimal('security_deposit', { precision: 10, scale: 2 }),\n  notes: text('notes'),\n  \n  // Invitation status and tracking\n  status: invitationStatusEnum('status').default('pending'),\n  tenantId: uuid('tenant_id').references(() => users.id), // Set when tenant accepts\n  sentAt: timestamp('sent_at').defaultNow(),\n  acceptedAt: timestamp('accepted_at'),\n  expiresAt: timestamp('expires_at').notNull(),\n  \n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport type TenantInvitation = typeof tenantInvitations.$inferSelect;\nexport type NewTenantInvitation = typeof tenantInvitations.$inferInsert;"],"names":["invitationStatusEnum","tenantInvitations","pgEnum","pgTable","id","uuid","defaultRandom","primaryKey","invitationToken","varchar","length","unique","notNull","landlordId","references","users","propertyId","properties","unitId","units","firstName","lastName","email","phone","emergencyContact","emergencyPhone","leaseStartDate","timestamp","leaseEndDate","monthlyRent","decimal","precision","scale","securityDeposit","notes","text","status","default","tenantId","sentAt","defaultNow","acceptedAt","expiresAt","createdAt","updatedAt"],"mappings":";;;;;;;;;;;QAIaA;eAAAA;;QAEAC;eAAAA;;;wBANqE;uBAC5D;4BACY;AAE3B,MAAMD,uBAAuBE,IAAAA,cAAM,EAAC,qBAAqB;IAAC;IAAW;IAAY;IAAW;CAAY;AAExG,MAAMD,oBAAoBE,IAAAA,eAAO,EAAC,sBAAsB;IAC7DC,IAAIC,IAAAA,YAAI,EAAC,MAAMC,aAAa,GAAGC,UAAU;IACzCC,iBAAiBC,IAAAA,eAAO,EAAC,oBAAoB;QAAEC,QAAQ;IAAI,GAAGC,MAAM,GAAGC,OAAO;IAC9EC,YAAYR,IAAAA,YAAI,EAAC,eAAeS,UAAU,CAAC,IAAMC,YAAK,CAACX,EAAE,EAAEQ,OAAO;IAClEI,YAAYX,IAAAA,YAAI,EAAC,eAAeS,UAAU,CAAC,IAAMG,sBAAU,CAACb,EAAE,EAAEQ,OAAO;IACvEM,QAAQb,IAAAA,YAAI,EAAC,WAAWS,UAAU,CAAC,IAAMK,iBAAK,CAACf,EAAE,EAAEQ,OAAO;IAE1D,gCAAgC;IAChCQ,WAAWX,IAAAA,eAAO,EAAC,cAAc;QAAEC,QAAQ;IAAI,GAAGE,OAAO;IACzDS,UAAUZ,IAAAA,eAAO,EAAC,aAAa;QAAEC,QAAQ;IAAI,GAAGE,OAAO;IACvDU,OAAOb,IAAAA,eAAO,EAAC,SAAS;QAAEC,QAAQ;IAAI,GAAGE,OAAO;IAChDW,OAAOd,IAAAA,eAAO,EAAC,SAAS;QAAEC,QAAQ;IAAG,GAAGE,OAAO;IAC/CY,kBAAkBf,IAAAA,eAAO,EAAC,qBAAqB;QAAEC,QAAQ;IAAI;IAC7De,gBAAgBhB,IAAAA,eAAO,EAAC,mBAAmB;QAAEC,QAAQ;IAAG;IAExD,oBAAoB;IACpBgB,gBAAgBC,IAAAA,iBAAS,EAAC,oBAAoBf,OAAO;IACrDgB,cAAcD,IAAAA,iBAAS,EAAC,kBAAkBf,OAAO;IACjDiB,aAAaC,IAAAA,eAAO,EAAC,gBAAgB;QAAEC,WAAW;QAAIC,OAAO;IAAE,GAAGpB,OAAO;IACzEqB,iBAAiBH,IAAAA,eAAO,EAAC,oBAAoB;QAAEC,WAAW;QAAIC,OAAO;IAAE;IACvEE,OAAOC,IAAAA,YAAI,EAAC;IAEZ,iCAAiC;IACjCC,QAAQpC,qBAAqB,UAAUqC,OAAO,CAAC;IAC/CC,UAAUjC,IAAAA,YAAI,EAAC,aAAaS,UAAU,CAAC,IAAMC,YAAK,CAACX,EAAE;IACrDmC,QAAQZ,IAAAA,iBAAS,EAAC,WAAWa,UAAU;IACvCC,YAAYd,IAAAA,iBAAS,EAAC;IACtBe,WAAWf,IAAAA,iBAAS,EAAC,cAAcf,OAAO;IAE1C+B,WAAWhB,IAAAA,iBAAS,EAAC,cAAca,UAAU;IAC7CI,WAAWjB,IAAAA,iBAAS,EAAC,cAAca,UAAU;AAC/C"}