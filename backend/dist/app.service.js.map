{"version":3,"sources":["../src/app.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@nestjs/common';\nimport { DATABASE_CONNECTION } from './database/database.module';\n\n@Injectable()\nexport class AppService {\n  constructor(\n    @Inject(DATABASE_CONNECTION) private readonly db: any,\n  ) {}\n\n  getHello(): string {\n    return 'Welcome to Homezy API - Property Management Platform';\n  }\n\n  async getHealth() {\n    let dbStatus = 'ok';\n    let dbLatency = 0;\n\n    try {\n      const start = Date.now();\n      await this.db.execute('SELECT 1');\n      dbLatency = Date.now() - start;\n    } catch (error) {\n      dbStatus = 'error';\n    }\n\n    return {\n      status: dbStatus === 'ok' ? 'ok' : 'degraded',\n      timestamp: new Date().toISOString(),\n      uptime: process.uptime(),\n      environment: process.env.NODE_ENV || 'development',\n      version: '1.0.0',\n      services: {\n        database: {\n          status: dbStatus,\n          latency: `${dbLatency}ms`,\n        },\n      },\n      memory: {\n        used: Math.round(process.memoryUsage().heapUsed / 1024 / 1024),\n        total: Math.round(process.memoryUsage().heapTotal / 1024 / 1024),\n        external: Math.round(process.memoryUsage().external / 1024 / 1024),\n      },\n    };\n  }\n}\n"],"names":["AppService","getHello","getHealth","dbStatus","dbLatency","start","Date","now","db","execute","error","status","timestamp","toISOString","uptime","process","environment","env","NODE_ENV","version","services","database","latency","memory","used","Math","round","memoryUsage","heapUsed","total","heapTotal","external"],"mappings":";;;;+BAIaA;;;eAAAA;;;wBAJsB;gCACC;;;;;;;;;;;;;;;AAG7B,IAAA,AAAMA,aAAN,MAAMA;IAKXC,WAAmB;QACjB,OAAO;IACT;IAEA,MAAMC,YAAY;QAChB,IAAIC,WAAW;QACf,IAAIC,YAAY;QAEhB,IAAI;YACF,MAAMC,QAAQC,KAAKC,GAAG;YACtB,MAAM,IAAI,CAACC,EAAE,CAACC,OAAO,CAAC;YACtBL,YAAYE,KAAKC,GAAG,KAAKF;QAC3B,EAAE,OAAOK,OAAO;YACdP,WAAW;QACb;QAEA,OAAO;YACLQ,QAAQR,aAAa,OAAO,OAAO;YACnCS,WAAW,IAAIN,OAAOO,WAAW;YACjCC,QAAQC,QAAQD,MAAM;YACtBE,aAAaD,QAAQE,GAAG,CAACC,QAAQ,IAAI;YACrCC,SAAS;YACTC,UAAU;gBACRC,UAAU;oBACRV,QAAQR;oBACRmB,SAAS,GAAGlB,UAAU,EAAE,CAAC;gBAC3B;YACF;YACAmB,QAAQ;gBACNC,MAAMC,KAAKC,KAAK,CAACX,QAAQY,WAAW,GAAGC,QAAQ,GAAG,OAAO;gBACzDC,OAAOJ,KAAKC,KAAK,CAACX,QAAQY,WAAW,GAAGG,SAAS,GAAG,OAAO;gBAC3DC,UAAUN,KAAKC,KAAK,CAACX,QAAQY,WAAW,GAAGI,QAAQ,GAAG,OAAO;YAC/D;QACF;IACF;IAtCA,YACE,AAA8CvB,EAAO,CACrD;aAD8CA,KAAAA;IAC7C;AAqCL"}