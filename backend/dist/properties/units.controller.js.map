{"version":3,"sources":["../../src/properties/units.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Patch,\n  Param,\n  Delete,\n  UseGuards,\n  Request,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { UnitsService } from './units.service';\nimport { CreateUnitDto, UpdateUnitDto } from './dto/unit.dto';\n\n@ApiTags('Units')\n@Controller('properties/:propertyId/units')\n@UseGuards(JwtAuthGuard)\n@ApiBearerAuth('JWT-auth')\nexport class UnitsController {\n  constructor(private readonly unitsService: UnitsService) {}\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new unit for a property' })\n  @ApiResponse({ status: 201, description: 'Unit created successfully' })\n  async create(\n    @Request() req,\n    @Param('propertyId') propertyId: string,\n    @Body() createUnitDto: CreateUnitDto,\n  ) {\n    console.log('üîç Controller - Raw body from request:', req.body);\n    console.log('üîç Controller - Processed DTO:', createUnitDto);\n    console.log('üîç Controller - DTO rent type:', typeof createUnitDto.rent, 'value:', createUnitDto.rent);\n    \n    return this.unitsService.create(propertyId, req.user.id, createUnitDto);\n  }\n\n  @Get()\n  @ApiOperation({ summary: 'Get all units for a property' })\n  @ApiResponse({ status: 200, description: 'Units retrieved successfully' })\n  async findAll(@Request() req, @Param('propertyId') propertyId: string) {\n    return this.unitsService.findAll(propertyId, req.user.id);\n  }\n\n  @Get('available')\n  @ApiOperation({ summary: 'Get available units for a property' })\n  @ApiResponse({ status: 200, description: 'Available units retrieved successfully' })\n  async getAvailable(@Request() req, @Param('propertyId') propertyId: string) {\n    return this.unitsService.getAvailableUnits(propertyId, req.user.id);\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get a specific unit' })\n  @ApiResponse({ status: 200, description: 'Unit retrieved successfully' })\n  @ApiResponse({ status: 404, description: 'Unit not found' })\n  async findOne(@Request() req, @Param('id') id: string) {\n    return this.unitsService.findOne(id, req.user.id);\n  }\n\n  @Patch(':id')\n  @ApiOperation({ summary: 'Update a unit' })\n  @ApiResponse({ status: 200, description: 'Unit updated successfully' })\n  @ApiResponse({ status: 404, description: 'Unit not found' })\n  async update(\n    @Request() req,\n    @Param('id') id: string,\n    @Body() updateUnitDto: UpdateUnitDto,\n  ) {\n    return this.unitsService.update(id, req.user.id, updateUnitDto);\n  }\n\n  @Delete(':id')\n  @ApiOperation({ summary: 'Delete a unit' })\n  @ApiResponse({ status: 200, description: 'Unit deleted successfully' })\n  @ApiResponse({ status: 404, description: 'Unit not found' })\n  async remove(@Request() req, @Param('id') id: string) {\n    await this.unitsService.remove(id, req.user.id);\n    return { message: 'Unit deleted successfully' };\n  }\n}"],"names":["UnitsController","create","req","propertyId","createUnitDto","console","log","body","rent","unitsService","user","id","findAll","getAvailable","getAvailableUnits","findOne","update","updateUnitDto","remove","message","summary","status","description"],"mappings":";;;;+BAoBaA;;;eAAAA;;;wBAVN;yBAC2D;8BACrC;8BACA;yBACgB;;;;;;;;;;;;;;;AAMtC,IAAA,AAAMA,kBAAN,MAAMA;IAGX,MAGMC,OACJ,AAAWC,GAAG,EACd,AAAqBC,UAAkB,EACvC,AAAQC,aAA4B,EACpC;QACAC,QAAQC,GAAG,CAAC,0CAA0CJ,IAAIK,IAAI;QAC9DF,QAAQC,GAAG,CAAC,kCAAkCF;QAC9CC,QAAQC,GAAG,CAAC,kCAAkC,OAAOF,cAAcI,IAAI,EAAE,UAAUJ,cAAcI,IAAI;QAErG,OAAO,IAAI,CAACC,YAAY,CAACR,MAAM,CAACE,YAAYD,IAAIQ,IAAI,CAACC,EAAE,EAAEP;IAC3D;IAEA,MAGMQ,QAAQ,AAAWV,GAAG,EAAE,AAAqBC,UAAkB,EAAE;QACrE,OAAO,IAAI,CAACM,YAAY,CAACG,OAAO,CAACT,YAAYD,IAAIQ,IAAI,CAACC,EAAE;IAC1D;IAEA,MAGME,aAAa,AAAWX,GAAG,EAAE,AAAqBC,UAAkB,EAAE;QAC1E,OAAO,IAAI,CAACM,YAAY,CAACK,iBAAiB,CAACX,YAAYD,IAAIQ,IAAI,CAACC,EAAE;IACpE;IAEA,MAIMI,QAAQ,AAAWb,GAAG,EAAE,AAAaS,EAAU,EAAE;QACrD,OAAO,IAAI,CAACF,YAAY,CAACM,OAAO,CAACJ,IAAIT,IAAIQ,IAAI,CAACC,EAAE;IAClD;IAEA,MAIMK,OACJ,AAAWd,GAAG,EACd,AAAaS,EAAU,EACvB,AAAQM,aAA4B,EACpC;QACA,OAAO,IAAI,CAACR,YAAY,CAACO,MAAM,CAACL,IAAIT,IAAIQ,IAAI,CAACC,EAAE,EAAEM;IACnD;IAEA,MAIMC,OAAO,AAAWhB,GAAG,EAAE,AAAaS,EAAU,EAAE;QACpD,MAAM,IAAI,CAACF,YAAY,CAACS,MAAM,CAACP,IAAIT,IAAIQ,IAAI,CAACC,EAAE;QAC9C,OAAO;YAAEQ,SAAS;QAA4B;IAChD;IA1DA,YAAY,AAAiBV,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AA2D5D;;;;QAxDkBW,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAczBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}