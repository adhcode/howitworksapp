{"version":3,"sources":["../../../src/tenant-rent-contracts/dto/tenant-rent-contract.dto.ts"],"sourcesContent":["import { \n  IsString, \n  IsNumber, \n  IsBoolean, \n  IsDateString, \n  IsEnum, \n  IsUUID, \n  IsOptional, \n  Min, \n  Max,\n  Length,\n  ValidateIf,\n  IsNotEmpty\n} from 'class-validator';\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { \n  IsFutureDate, \n  IsAfterOriginalExpiry, \n  IsReasonableRentAmount, \n  IsValidContractDuration,\n  IsValidOriginalExpiry\n} from '../validators/custom-validators';\n\nexport enum LandlordPayoutType {\n  MONTHLY = 'monthly',\n  YEARLY = 'yearly',\n}\n\nexport enum ContractStatus {\n  ACTIVE = 'active',\n  EXPIRED = 'expired',\n  TERMINATED = 'terminated',\n}\n\nexport class CreateRentContractDto {\n  @ApiProperty({ description: 'Tenant user ID' })\n  @IsUUID()\n  tenantId!: string;\n\n  @ApiProperty({ description: 'Landlord user ID' })\n  @IsUUID()\n  landlordId!: string;\n\n  @ApiProperty({ description: 'Property ID' })\n  @IsUUID()\n  propertyId!: string;\n\n  @ApiProperty({ description: 'Unit ID' })\n  @IsUUID()\n  unitId!: string;\n\n  @ApiProperty({ description: 'Monthly rent amount', example: 25000 })\n  @IsNumber({}, { message: 'Monthly amount must be a valid number' })\n  @Min(1000, { message: 'Monthly amount must be at least ₦1,000' })\n  @Max(10000000, { message: 'Monthly amount cannot exceed ₦10,000,000' })\n  @IsReasonableRentAmount()\n  monthlyAmount!: number;\n\n  @ApiProperty({ description: 'Contract expiry date', example: '2024-12-31T23:59:59.000Z' })\n  @IsDateString({}, { message: 'Expiry date must be a valid ISO date string' })\n  @IsFutureDate({ message: 'Contract expiry date must be in the future' })\n  @IsValidContractDuration()\n  @IsAfterOriginalExpiry()\n  expiryDate!: string;\n\n  @ApiProperty({ \n    enum: LandlordPayoutType, \n    description: 'Landlord payout preference',\n    example: LandlordPayoutType.MONTHLY \n  })\n  @IsEnum(LandlordPayoutType)\n  landlordPayoutType!: LandlordPayoutType;\n\n  @ApiProperty({ description: 'Whether this is an existing tenant being transitioned' })\n  @IsBoolean()\n  isExistingTenant!: boolean;\n\n  @ApiPropertyOptional({ \n    description: 'Original expiry date for existing tenants',\n    example: '2024-06-30T23:59:59.000Z' \n  })\n  @ValidateIf(o => o.isExistingTenant === true)\n  @IsNotEmpty({ message: 'Original expiry date is required for existing tenants' })\n  @IsDateString({}, { message: 'Original expiry date must be a valid ISO date string' })\n  @IsValidOriginalExpiry()\n  originalExpiryDate?: string;\n}\n\nexport class ProcessPaymentDto {\n  @ApiProperty({ description: 'Rent contract ID' })\n  @IsUUID()\n  contractId!: string;\n\n  @ApiProperty({ description: 'Payment amount', example: 25000 })\n  @IsNumber({}, { message: 'Payment amount must be a valid number' })\n  @Min(1, { message: 'Payment amount must be greater than 0' })\n  @Max(10000000, { message: 'Payment amount cannot exceed ₦10,000,000' })\n  amount!: number;\n\n  @ApiPropertyOptional({ description: 'Payment method used' })\n  @IsOptional()\n  @IsString({ message: 'Payment method must be a string' })\n  @Length(1, 50, { message: 'Payment method must be between 1 and 50 characters' })\n  paymentMethod?: string;\n\n  @ApiPropertyOptional({ description: 'Payment reference from payment gateway' })\n  @IsOptional()\n  @IsString({ message: 'Payment reference must be a string' })\n  @Length(1, 100, { message: 'Payment reference must be between 1 and 100 characters' })\n  reference?: string;\n}\n\nexport class UpdateContractStatusDto {\n  @ApiProperty({ \n    enum: ContractStatus, \n    description: 'New contract status',\n    example: ContractStatus.TERMINATED \n  })\n  @IsEnum(ContractStatus)\n  status!: ContractStatus;\n\n  @ApiPropertyOptional({ description: 'Reason for status change' })\n  @IsOptional()\n  @IsString({ message: 'Reason must be a string' })\n  @Length(1, 500, { message: 'Reason must be between 1 and 500 characters' })\n  reason?: string;\n}\n\nexport class ContractQueryDto {\n  @ApiPropertyOptional({ description: 'Filter by tenant ID' })\n  @IsOptional()\n  @IsUUID()\n  tenantId?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by landlord ID' })\n  @IsOptional()\n  @IsUUID()\n  landlordId?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by property ID' })\n  @IsOptional()\n  @IsUUID()\n  propertyId?: string;\n\n  @ApiPropertyOptional({ \n    enum: ContractStatus, \n    description: 'Filter by contract status' \n  })\n  @IsOptional()\n  @IsEnum(ContractStatus)\n  status?: ContractStatus;\n}\n\nexport class EscrowBalanceQueryDto {\n  @ApiProperty({ description: 'Landlord user ID' })\n  @IsUUID()\n  landlordId!: string;\n\n  @ApiPropertyOptional({ description: 'Include only unreleased balances' })\n  @IsOptional()\n  @IsBoolean()\n  unreleasedOnly?: boolean;\n}\n\nexport class ScheduleNotificationDto {\n  @ApiProperty({ description: 'Rent contract ID' })\n  @IsUUID()\n  contractId!: string;\n\n  @ApiProperty({ description: 'Notification type', enum: ['reminder', 'overdue', 'success'] })\n  @IsEnum(['reminder', 'overdue', 'success'])\n  notificationType!: 'reminder' | 'overdue' | 'success';\n\n  @ApiProperty({ description: 'When to send the notification' })\n  @IsDateString()\n  scheduledFor!: string;\n\n  @ApiProperty({ description: 'Notification title' })\n  @IsString({ message: 'Notification title must be a string' })\n  @Length(1, 100, { message: 'Notification title must be between 1 and 100 characters' })\n  title!: string;\n\n  @ApiProperty({ description: 'Notification message' })\n  @IsString({ message: 'Notification message must be a string' })\n  @Length(1, 500, { message: 'Notification message must be between 1 and 500 characters' })\n  message!: string;\n}\n\n// Response DTOs (no validation decorators needed)\nexport class RentContractResponseDto {\n  @ApiProperty({ description: 'Contract ID' })\n  id!: string;\n\n  @ApiProperty({ description: 'Tenant user ID' })\n  tenantId!: string;\n\n  @ApiProperty({ description: 'Landlord user ID' })\n  landlordId!: string;\n\n  @ApiProperty({ description: 'Property ID' })\n  propertyId!: string;\n\n  @ApiProperty({ description: 'Unit ID' })\n  unitId!: string;\n\n  @ApiProperty({ description: 'Monthly rent amount' })\n  monthlyAmount!: string;\n\n  @ApiProperty({ description: 'Contract expiry date' })\n  expiryDate!: Date;\n\n  @ApiProperty({ enum: LandlordPayoutType, description: 'Landlord payout preference' })\n  landlordPayoutType!: LandlordPayoutType;\n\n  @ApiProperty({ description: 'Next payment due date' })\n  nextPaymentDue!: Date;\n\n  @ApiProperty({ description: 'Transition start date' })\n  transitionStartDate!: Date;\n\n  @ApiProperty({ enum: ContractStatus, description: 'Contract status' })\n  status!: ContractStatus;\n\n  @ApiProperty({ description: 'Whether this is an existing tenant' })\n  isExistingTenant!: boolean;\n\n  @ApiProperty({ description: 'Original expiry date for existing tenants', required: false })\n  originalExpiryDate?: Date;\n\n  @ApiProperty({ description: 'Contract creation date' })\n  createdAt!: Date;\n\n  @ApiProperty({ description: 'Contract last update date' })\n  updatedAt!: Date;\n}\n\nexport class EscrowBalanceResponseDto {\n  @ApiProperty({ description: 'Escrow balance ID' })\n  id!: string;\n\n  @ApiProperty({ description: 'Landlord user ID' })\n  landlordId!: string;\n\n  @ApiProperty({ description: 'Associated contract ID' })\n  contractId!: string;\n\n  @ApiProperty({ description: 'Total amount in escrow' })\n  totalEscrowed!: string;\n\n  @ApiProperty({ description: 'Number of months accumulated' })\n  monthsAccumulated!: number;\n\n  @ApiProperty({ description: 'Expected release date' })\n  expectedReleaseDate!: Date;\n\n  @ApiProperty({ description: 'Whether the escrow has been released' })\n  isReleased!: boolean;\n\n  @ApiProperty({ description: 'Release date', required: false })\n  releasedAt?: Date;\n\n  @ApiProperty({ description: 'Released amount', required: false })\n  releasedAmount?: string;\n\n  @ApiProperty({ description: 'Escrow creation date' })\n  createdAt!: Date;\n\n  @ApiProperty({ description: 'Escrow last update date' })\n  updatedAt!: Date;\n}\n\nexport class PaymentNotificationResponseDto {\n  @ApiProperty({ description: 'Notification ID' })\n  id!: string;\n\n  @ApiProperty({ description: 'Associated contract ID' })\n  contractId!: string;\n\n  @ApiProperty({ description: 'Tenant user ID' })\n  tenantId!: string;\n\n  @ApiProperty({ description: 'Notification type', enum: ['reminder', 'overdue', 'success'] })\n  notificationType!: 'reminder' | 'overdue' | 'success';\n\n  @ApiProperty({ description: 'Scheduled send time' })\n  scheduledFor!: Date;\n\n  @ApiProperty({ description: 'Actual send time', required: false })\n  sentAt?: Date;\n\n  @ApiProperty({ description: 'Notification title' })\n  title!: string;\n\n  @ApiProperty({ description: 'Notification message' })\n  message!: string;\n\n  @ApiProperty({ description: 'Notification status', enum: ['pending', 'sent', 'failed'] })\n  status!: 'pending' | 'sent' | 'failed';\n\n  @ApiProperty({ description: 'Expo receipt ID', required: false })\n  expoReceiptId?: string;\n\n  @ApiProperty({ description: 'Notification creation date' })\n  createdAt!: Date;\n}\n\nexport class PaymentResultDto {\n  @ApiProperty({ description: 'Whether the payment was successful' })\n  success!: boolean;\n\n  @ApiProperty({ enum: LandlordPayoutType, description: 'How the payment was processed' })\n  payoutType!: LandlordPayoutType;\n\n  @ApiProperty({ description: 'Payment processing message' })\n  message!: string;\n\n  @ApiProperty({ description: 'Next payment due date' })\n  nextPaymentDue!: Date;\n}\n\n// Additional utility DTOs\nexport class TransitionDateCalculationDto {\n  @ApiProperty({ description: 'Contract expiry date' })\n  @IsDateString()\n  expiryDate!: string;\n\n  @ApiPropertyOptional({ description: 'Original expiry date for existing tenants' })\n  @IsOptional()\n  @IsDateString()\n  originalExpiryDate?: string;\n\n  @ApiPropertyOptional({ description: 'Whether this is an existing tenant' })\n  @IsOptional()\n  @IsBoolean()\n  isExistingTenant?: boolean;\n\n  @ApiProperty({ enum: LandlordPayoutType, description: 'Landlord payout preference' })\n  @IsEnum(LandlordPayoutType)\n  payoutType!: LandlordPayoutType;\n}\n\nexport class TransitionDateResponseDto {\n  @ApiProperty({ description: 'Calculated transition start date' })\n  transitionStartDate!: Date;\n\n  @ApiProperty({ description: 'First payment due date' })\n  firstPaymentDue!: Date;\n\n  @ApiProperty({ description: 'Months until transition' })\n  monthsUntilTransition!: number;\n}"],"names":["ContractQueryDto","ContractStatus","CreateRentContractDto","EscrowBalanceQueryDto","EscrowBalanceResponseDto","LandlordPayoutType","PaymentNotificationResponseDto","PaymentResultDto","ProcessPaymentDto","RentContractResponseDto","ScheduleNotificationDto","TransitionDateCalculationDto","TransitionDateResponseDto","UpdateContractStatusDto","description","example","message","enum","o","isExistingTenant","required"],"mappings":"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"}